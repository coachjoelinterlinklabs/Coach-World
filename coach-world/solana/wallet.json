import fs from "fs";
import { Connection, Keypair, clusterApiUrl, PublicKey } from "@solana/web3.js";
import {
createMint,
getOrCreateAssociatedTokenAccount,
mintTo,
getAccount
} from "@solana/spl-token";


(async () => {
const connection = new Connection(clusterApiUrl("devnet"), "confirmed");
const payer = Keypair.fromSecretKey(Uint8Array.from(JSON.parse(fs.readFileSync("./wallet.json", "utf8"))));


// Create a mint with 9 decimals
const decimals = 9;
const mint = await createMint(connection, payer, payer.publicKey, null, decimals);
console.log("Created CJC mint:", mint.toBase58());


// Create associated token account for payer
const payerTokenAcc = await getOrCreateAssociatedTokenAccount(connection, payer, mint, payer.publicKey);
console.log("Payer ATA:", payerTokenAcc.address.toBase58());


// Mint 10000 tokens (adjust as needed)
const amount = 10000 * 10 ** decimals;
await mintTo(connection, payer, mint, payerTokenAcc.address, payer, amount);
console.log("Minted tokens to payer account.");


// show balance
const acct = await getAccount(connection, payerTokenAcc.address);
console.log("Balance (raw units):", acct.amount.toString());
})();